/* 학생 */
CREATE TABLE MY_SCHEMA.STUDENT (
	stu_num CHAR(10) NOT NULL, /* 학번 */
	name VARCHAR2(12) NOT NULL, /* 이름 */
	call_num VARCHAR2(15) NOT NULL, /* 전화번호 */
	e_address VARCHAR2(30) NOT NULL, /* 이메일주소 */
	major_name VARCHAR2(15) NOT NULL, /* 학과명 */
	major_code CHAR(10) NOT NULL /* 학과코드 */
);

COMMENT ON TABLE MY_SCHEMA.STUDENT IS '학생';

COMMENT ON COLUMN MY_SCHEMA.STUDENT.stu_num IS '학번';

COMMENT ON COLUMN MY_SCHEMA.STUDENT.name IS '이름';

COMMENT ON COLUMN MY_SCHEMA.STUDENT.call_num IS '전화번호';

COMMENT ON COLUMN MY_SCHEMA.STUDENT.e_address IS '이메일주소';

COMMENT ON COLUMN MY_SCHEMA.STUDENT.major_name IS '학과명';

COMMENT ON COLUMN MY_SCHEMA.STUDENT.major_code IS '학과코드';

CREATE UNIQUE INDEX MY_SCHEMA.PK_STUDENT
	ON MY_SCHEMA.STUDENT (
		stu_num ASC
	);

ALTER TABLE MY_SCHEMA.STUDENT
	ADD
		CONSTRAINT PK_STUDENT
		PRIMARY KEY (
			stu_num
		);

/* 학과 */
CREATE TABLE MY_SCHEMA.MAJOR (
	major_code CHAR(10) NOT NULL, /* 학과코드 */
	major_name VARCHAR2(10) NOT NULL /* 학과명 */
);

COMMENT ON TABLE MY_SCHEMA.MAJOR IS '학과';

COMMENT ON COLUMN MY_SCHEMA.MAJOR.major_code IS '학과코드';

COMMENT ON COLUMN MY_SCHEMA.MAJOR.major_name IS '학과명';

CREATE UNIQUE INDEX MY_SCHEMA.PK_MAJOR
	ON MY_SCHEMA.MAJOR (
		major_code ASC
	);

ALTER TABLE MY_SCHEMA.MAJOR
	ADD
		CONSTRAINT PK_MAJOR
		PRIMARY KEY (
			major_code
		);

/* 강의 */
CREATE TABLE MY_SCHEMA.LECTURE (
	lec_code CHAR(10) NOT NULL, /* 강의코드 */
	lec_name VARCHAR2(20) NOT NULL, /* 강의명 */
	lec_room VARCHAR2(20) NOT NULL, /* 강의실 */
	pro_code CHAR(10) NOT NULL /* 강사코드 */
);

COMMENT ON TABLE MY_SCHEMA.LECTURE IS '강의';

COMMENT ON COLUMN MY_SCHEMA.LECTURE.lec_code IS '강의코드';

COMMENT ON COLUMN MY_SCHEMA.LECTURE.lec_name IS '강의명';

COMMENT ON COLUMN MY_SCHEMA.LECTURE.lec_room IS '강의실';

COMMENT ON COLUMN MY_SCHEMA.LECTURE.pro_code IS '강사코드';

CREATE UNIQUE INDEX MY_SCHEMA.PK_LECTURE
	ON MY_SCHEMA.LECTURE (
		lec_code ASC
	);

ALTER TABLE MY_SCHEMA.LECTURE
	ADD
		CONSTRAINT PK_LECTURE
		PRIMARY KEY (
			lec_code
		);

/* 강사 */
CREATE TABLE MY_SCHEMA.PROFESSOR (
	pro_code CHAR(10) NOT NULL, /* 강사코드 */
	pro_name VARCHAR2(12) NOT NULL, /* 강사명 */
	call_num VARCHAR2(15) NOT NULL, /* 전화번호 */
	e_address VARCHAR2(30) NOT NULL, /* 이메일주소 */
	major_code CHAR(10) NOT NULL /* 학과코드 */
);

COMMENT ON TABLE MY_SCHEMA.PROFESSOR IS '강사';

COMMENT ON COLUMN MY_SCHEMA.PROFESSOR.pro_code IS '강사코드';

COMMENT ON COLUMN MY_SCHEMA.PROFESSOR.pro_name IS '강사명';

COMMENT ON COLUMN MY_SCHEMA.PROFESSOR.call_num IS '전화번호';

COMMENT ON COLUMN MY_SCHEMA.PROFESSOR.e_address IS '이메일주소';

COMMENT ON COLUMN MY_SCHEMA.PROFESSOR.major_code IS '학과코드';

CREATE UNIQUE INDEX MY_SCHEMA.PK_PROFESSOR
	ON MY_SCHEMA.PROFESSOR (
		pro_code ASC
	);

ALTER TABLE MY_SCHEMA.PROFESSOR
	ADD
		CONSTRAINT PK_PROFESSOR
		PRIMARY KEY (
			pro_code
		);

/* 수강신청 */
CREATE TABLE MY_SCHEMA.SIGNUP (
	stu_num CHAR(10) NOT NULL, /* 학번 */
	lec_code CHAR(10) NOT NULL, /* 강의코드 */
	grade CHAR(4) NOT NULL /* 학점 */
);

COMMENT ON TABLE MY_SCHEMA.SIGNUP IS '수강신청';

COMMENT ON COLUMN MY_SCHEMA.SIGNUP.stu_num IS '학번';

COMMENT ON COLUMN MY_SCHEMA.SIGNUP.lec_code IS '강의코드';

COMMENT ON COLUMN MY_SCHEMA.SIGNUP.grade IS '학점';

CREATE UNIQUE INDEX MY_SCHEMA.PK_SIGNUP
	ON MY_SCHEMA.SIGNUP (
		stu_num ASC,
		lec_code ASC
	);

ALTER TABLE MY_SCHEMA.SIGNUP
	ADD
		CONSTRAINT PK_SIGNUP
		PRIMARY KEY (
			stu_num,
			lec_code
		);

ALTER TABLE MY_SCHEMA.STUDENT
	ADD
		CONSTRAINT FK_MAJOR_TO_STUDENT
		FOREIGN KEY (
			major_code
		)
		REFERENCES MY_SCHEMA.MAJOR (
			major_code
		);

ALTER TABLE MY_SCHEMA.LECTURE
	ADD
		CONSTRAINT FK_PROFESSOR_TO_LECTURE
		FOREIGN KEY (
			pro_code
		)
		REFERENCES MY_SCHEMA.PROFESSOR (
			pro_code
		);

ALTER TABLE MY_SCHEMA.PROFESSOR
	ADD
		CONSTRAINT FK_MAJOR_TO_PROFESSOR
		FOREIGN KEY (
			major_code
		)
		REFERENCES MY_SCHEMA.MAJOR (
			major_code
		);

ALTER TABLE MY_SCHEMA.SIGNUP
	ADD
		CONSTRAINT FK_STUDENT_TO_SIGNUP
		FOREIGN KEY (
			stu_num
		)
		REFERENCES MY_SCHEMA.STUDENT (
			stu_num
		);

ALTER TABLE MY_SCHEMA.SIGNUP
	ADD
		CONSTRAINT FK_LECTURE_TO_SIGNUP
		FOREIGN KEY (
			lec_code
		)
		REFERENCES MY_SCHEMA.LECTURE (
			lec_code
		);